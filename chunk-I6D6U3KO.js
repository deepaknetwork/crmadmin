import{a as H}from"./chunk-DNUCXBPU.js";import"./chunk-4ASL325B.js";import{jb as R,ya as D,za as Q}from"./chunk-JYASIROW.js";import{h as P}from"./chunk-LEGGU5ER.js";import{Bb as c,Kb as y,Lb as w,Mb as n,Nb as a,Ob as k,Sb as x,Vb as _,Xb as v,Zc as T,bc as E,cc as F,dc as M,eb as r,fb as h,fd as j,hc as l,ic as u,la as S,md as O,nd as $,qc as I,uc as m,wa as p,xa as C,yc as V,zb as b}from"./chunk-V2YTBSHV.js";import"./chunk-JNJ3D7EP.js";var N=["verticallyCenteredModal"],z=(s,o)=>o.id,f=(s,o,e,t)=>({"success-row":s,"cancelled-row":o,"failed-row":e,"scheduled-row":t});function q(s,o){if(s&1){let e=x();n(0,"tr",5),_("click",function(){let i=p(e).$implicit,d=v();return C(i.status=="Scheduled"?d.openModal(i):null)}),n(1,"td",6)(2,"div"),l(3),a()(),n(4,"td",6)(5,"div"),l(6),a()(),n(7,"td",6)(8,"div"),l(9),a()(),n(10,"td",6)(11,"div"),l(12),a()(),n(13,"td",6)(14,"div"),l(15),a()(),n(16,"td",6)(17,"div"),l(18),a()()()}if(s&2){let e=o.$implicit,t=o.$index;r(),c("ngClass",m(12,f,e.status==="Success",e.status==="Cancelled",e.status==="Failed",e.status==="Scheduled")),r(2),u(t+1),r(),c("ngClass",m(17,f,e.status==="Success",e.status==="Cancelled",e.status==="Failed",e.status==="Scheduled")),r(2),u(e.catogory),r(),c("ngClass",m(22,f,e.status==="Success",e.status==="Cancelled",e.status==="Failed",e.status==="Scheduled")),r(2),u(e.status),r(),c("ngClass",m(27,f,e.status==="Success",e.status==="Cancelled",e.status==="Failed",e.status==="Scheduled")),r(2),u(e.customerId),r(),c("ngClass",m(32,f,e.status==="Success",e.status==="Cancelled",e.status==="Failed",e.status==="Scheduled")),r(2),u(e.projectId),r(),c("ngClass",m(37,f,e.status==="Success",e.status==="Cancelled",e.status==="Failed",e.status==="Scheduled")),r(2),u(e.time)}}function A(s,o){if(s&1){let e=x();n(0,"div",7)(1,"h5",8),l(2,"Call status"),a(),n(3,"button",9),_("click",function(){let i=p(e).$implicit;return C(i.dismiss("Cross click"))}),a()(),n(4,"div",10)(5,"button",11),_("click",function(){p(e);let i=v();return C(i.stat("Success"))}),l(6,"Success"),a(),n(7,"button",12),_("click",function(){p(e);let i=v();return C(i.stat("Cancelled"))}),l(8,"Cancelled"),a(),n(9,"button",13),_("click",function(){p(e);let i=v();return C(i.stat("Failed"))}),l(10,"Failed"),a()(),k(11,"div",14)}}var ie=(()=>{let o=class o{constructor(t,i,d){this.http=t,this.modalService=i,this.router=d,this.deals=[]}ngOnInit(){this.http.get("https://anorg.yellowrock-ae9aa95a.southindia.azurecontainerapps.io/admin/calls").subscribe(t=>{this.deals=t.reverse(),console.log(t)},t=>{console.log(t)})}openModal(t){this.selecteddeal=t,this.modalService.open(this.verticallyCenteredModal,{centered:!0})}stat(t){console.log(t),this.http.post("https://anorg.yellowrock-ae9aa95a.southindia.azurecontainerapps.io/admin/callstatus",{id:this.selecteddeal.id,status:t}).subscribe(i=>{this.modalService.dismissAll(this.verticallyCenteredModal),this.router.navigate(["calls"])},i=>{console.error("Error updating project",i)})}};o.\u0275fac=function(i){return new(i||o)(h(O),h(H),h(P))},o.\u0275cmp=S({type:o,selectors:[["app-calls"]],viewQuery:function(i,d){if(i&1&&E(N,7),i&2){let g;F(g=M())&&(d.verticallyCenteredModal=g.first)}},standalone:!0,features:[I],decls:22,vars:3,consts:[["verticallyCenteredModal",""],["cTable","",3,"hover","responsive","striped"],[1,"text-nowrap","text-truncate"],[1,"bg-body-tertiary","text-center"],[1,"clickable-row"],[1,"clickable-row",3,"click"],[1,"text-center",3,"ngClass"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body",2,"display","flex","justify-content","space-around"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"modal-footer"]],template:function(i,d){i&1&&(n(0,"c-row")(1,"c-col")(2,"table",1)(3,"thead",2)(4,"tr")(5,"th",3),l(6,"SI NO"),a(),n(7,"th",3),l(8,"Catogory"),a(),n(9,"th",3),l(10,"Status"),a(),n(11,"th",3),l(12,"Customer ID"),a(),n(13,"th",3),l(14,"Project Id"),a(),n(15,"th",3),l(16,"Time"),a()()(),n(17,"tbody"),y(18,q,19,42,"tr",4,z),a()()()(),b(20,A,12,0,"ng-template",null,0,V)),i&2&&(r(2),c("hover",!0)("responsive",!0)("striped",!0),r(16),w(d.deals))},dependencies:[$,j,T,R,D,Q],styles:[".success-row[_ngcontent-%COMP%]{background-color:#f0fff5}.cancelled-row[_ngcontent-%COMP%], .failed-row[_ngcontent-%COMP%]{background-color:#fff0f0}.scheduled-row[_ngcontent-%COMP%]{background-color:#e1e1ff}"]});let s=o;return s})();export{ie as CallsComponent};
